<!doctype html>
<!--
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <title>&lt;service-worker&gt; Demo</title>
    <script src="../../webcomponentsjs/webcomponents.min.js"></script>
    <link rel="import" href="../service-worker-elements.html">
  </head>

  <body>
    <template is="x-autobind" id="page-template">
      <service-worker skipwaiting
                      clientsclaim
                      state="{{state}}"
                      on-service-worker-error="updateStatus"
                      on-service-worker-updated="updateStatus"
                      on-service-worker-installed="updateStatus">
        <service-worker-import href="helper/jsonFetch.js"></service-worker-import>
        <service-worker-cache defaultcachestrategy="networkFirst"
                              precache='["file.txt"]'>
        </service-worker-cache>
        <service-worker-fetch path="/(.+)\.json"
                              handler="jsonFetch">
        </service-worker-fetch>
        <service-worker-fetch path="/(.+)"
                              handler="cacheFirst"
                              origin="/https:\/\/fonts.+/">
        </service-worker-fetch>
      </service-worker>

      <p>Message: <span>{{message}}</span></p>
      <p>State: <span>{{state}}</span></p>
    </template>

    <script>
      var t = document.querySelector('#page-template');
      t.updateStatus = function(e) {
        t.message = e.detail;
      };
    </script>
  </body>
</html>
